// eslint-disable-next-line eslint-comments/disable-enable-pair
/* eslint-disable @typescript-eslint/explicit-module-boundary-types */
import util from 'util';
import ExpressSession from 'express-session';
import MongoStoreV2 from '../lib/MongoStore';
// Create a connect cookie instance
export const makeCookie = () => {
    const cookie = new ExpressSession.Cookie();
    cookie.maxAge = 10000; // This sets cookie.expire through a setter
    cookie.secure = true;
    cookie.domain = 'cow.com';
    cookie.sameSite = false;
    return cookie;
};
// Create session data
export const makeData = () => {
    return {
        foo: 'bar',
        baz: {
            cow: 'moo',
            chicken: 'cluck',
        },
        num: 1,
        cookie: makeCookie(),
    };
};
export const makeDataNoCookie = () => {
    return {
        foo: 'bar',
        baz: {
            cow: 'moo',
            fish: 'blub',
            fox: 'nobody knows!',
        },
        num: 2,
    };
};
export const createStoreHelper = (opt = {}) => {
    const store = MongoStoreV2.create({
        mongoUrl: 'mongodb://root:example@127.0.0.1:27017',
        mongoOptions: { useUnifiedTopology: true },
        dbName: 'testDb',
        collectionName: 'test-collection',
        ...opt,
    });
    const storePromise = {
        length: util.promisify(store.length).bind(store),
        clear: util.promisify(store.clear).bind(store),
        get: util.promisify(store.get).bind(store),
        set: util.promisify(store.set).bind(store),
        all: util.promisify(store.all).bind(store),
        touch: util.promisify(store.touch).bind(store),
        destroy: util.promisify(store.destroy).bind(store),
        close: store.close.bind(store),
    };
    return { store, storePromise };
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVzdEhlbHBlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy90ZXN0L3Rlc3RIZWxwZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsK0RBQStEO0FBQy9ELHNFQUFzRTtBQUN0RSxPQUFPLElBQUksTUFBTSxNQUFNLENBQUE7QUFDdkIsT0FBTyxjQUFjLE1BQU0saUJBQWlCLENBQUE7QUFFNUMsT0FBTyxZQUFxQyxNQUFNLG1CQUFtQixDQUFBO0FBRXJFLG1DQUFtQztBQUNuQyxNQUFNLENBQUMsTUFBTSxVQUFVLEdBQUcsR0FBRyxFQUFFO0lBQzdCLE1BQU0sTUFBTSxHQUFHLElBQUksY0FBYyxDQUFDLE1BQU0sRUFBRSxDQUFBO0lBQzFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFBLENBQUMsMkNBQTJDO0lBQ2pFLE1BQU0sQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFBO0lBQ3BCLE1BQU0sQ0FBQyxNQUFNLEdBQUcsU0FBUyxDQUFBO0lBQ3pCLE1BQU0sQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFBO0lBRXZCLE9BQU8sTUFBTSxDQUFBO0FBQ2YsQ0FBQyxDQUFBO0FBRUQsc0JBQXNCO0FBQ3RCLE1BQU0sQ0FBQyxNQUFNLFFBQVEsR0FBRyxHQUFHLEVBQUU7SUFDM0IsT0FBTztRQUNMLEdBQUcsRUFBRSxLQUFLO1FBQ1YsR0FBRyxFQUFFO1lBQ0gsR0FBRyxFQUFFLEtBQUs7WUFDVixPQUFPLEVBQUUsT0FBTztTQUNqQjtRQUNELEdBQUcsRUFBRSxDQUFDO1FBQ04sTUFBTSxFQUFFLFVBQVUsRUFBRTtLQUNyQixDQUFBO0FBQ0gsQ0FBQyxDQUFBO0FBRUQsTUFBTSxDQUFDLE1BQU0sZ0JBQWdCLEdBQUcsR0FBRyxFQUFFO0lBQ25DLE9BQU87UUFDTCxHQUFHLEVBQUUsS0FBSztRQUNWLEdBQUcsRUFBRTtZQUNILEdBQUcsRUFBRSxLQUFLO1lBQ1YsSUFBSSxFQUFFLE1BQU07WUFDWixHQUFHLEVBQUUsZUFBZTtTQUNyQjtRQUNELEdBQUcsRUFBRSxDQUFDO0tBQ1AsQ0FBQTtBQUNILENBQUMsQ0FBQTtBQUVELE1BQU0sQ0FBQyxNQUFNLGlCQUFpQixHQUFHLENBQUMsTUFBb0MsRUFBRSxFQUFFLEVBQUU7SUFDMUUsTUFBTSxLQUFLLEdBQUcsWUFBWSxDQUFDLE1BQU0sQ0FBQztRQUNoQyxRQUFRLEVBQUUsd0NBQXdDO1FBQ2xELFlBQVksRUFBRSxFQUFFLGtCQUFrQixFQUFFLElBQUksRUFBRTtRQUMxQyxNQUFNLEVBQUUsUUFBUTtRQUNoQixjQUFjLEVBQUUsaUJBQWlCO1FBQ2pDLEdBQUcsR0FBRztLQUNQLENBQUMsQ0FBQTtJQUVGLE1BQU0sWUFBWSxHQUFHO1FBQ25CLE1BQU0sRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ2hELEtBQUssRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQzlDLEdBQUcsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQzFDLEdBQUcsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQzFDLEdBQUcsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQzFDLEtBQUssRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQzlDLE9BQU8sRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ2xELEtBQUssRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7S0FDL0IsQ0FBQTtJQUNELE9BQU8sRUFBRSxLQUFLLEVBQUUsWUFBWSxFQUFFLENBQUE7QUFDaEMsQ0FBQyxDQUFBIn0=